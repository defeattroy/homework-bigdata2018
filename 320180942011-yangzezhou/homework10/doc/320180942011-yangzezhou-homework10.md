# 320180942011-yangzezhou-homework10

---------------------

## 作业思路



![datascience-homework10](.\datascience-homework10.png)

---------

## 实现细节

### 1. 下载

使用到了urllib库，利用request请求访问网站，根据index.txt中文件的存储规律进行循环，下载数据。

即首先给出文件夹名，之后所跟随的json文件均放在该文件夹下，共有六个文件夹。按照这样的存储方式下载到本地。这一整个过程写成了一个函数down_load()，是一个简单的爬虫函数，只是简单的分析网站规律下载数据，不具有很好的重用性。

### 2. 分析与处理

利用os.chdir()进入不同的路径，直接对文件进行操作。利用pandas.read_json()可以将所有的json文件进行读入为DataFrame格式的数据，方便绘图。

#### 2.1 文件为空即删除

通过DataFrame.empty的使用可以判断json文件是否为空，如果为空则直接对文件进行删除操作。

#### 2.2 对文件内容信息的信息量进行筛选

将一个文件夹中的所有文件均进行绘图操作，相互对比再结合测试的场景，可以将一些信息量较小的文件进行[^重命名]用来标记。例如下面第一张图就是信息量较大的一个文件，而第二张图信息量就较少，将其进行重命名。

![standard](.\standard.png)

![bad](.\bad.png)

#### 2.3 对一个文件夹下的测试时间进行统一

根据每个文件记录时长的柱状图，将用时时间过长或过短的进行剔除。如图三所示的柱状图，可以看出第1,7,11,14,23,34条数据明显高于平均值，可以选择将其同信息量较少的文件一样进行[^时间重命名]处理。处理后进行剔除分析，如图四，数据分布大致均匀。



![timebar](.\timebar.png)

![timebox](.\timebox.png)



[^重命名]: 虽然信息量较少，但是后续可能仍能显示出一些信息。此处为在文件名后加_error。
[^时间重命名]: 同上重命名，此处在文件名后加_time_error。

-------

### 3. 总结

本次作业主要用到了人工参与的预处理工作，包括数据的下载收集与整理，通过简单读入与matplotlib进行绘图看出异常的数据集进行删除或标记操作完成初步最简单的预处理。

**PS：此次的python程序在运行过程中使用到很多的绘图操作和文件的直接处理，因此上交作业时已经将绘图操作注释，此处的绘图操作需要人机交互进行数据的判断；同时因为涉及到直接对文件的处理，反复运行会抛出异常；被重命名的文件可能有其他潜在价值（例如切分时间段进行研究），由于时间关系这些都没有进行恰当的处理，但是大致思路和固定的处理方式已在文档中叙述，望老师见谅！**







